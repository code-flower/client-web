<!DOCTYPE html>
<html ng-app="CodeFlower">
  <head>
    <title>CodeFlower</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/images/favicon.ico"/>

    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/bootstrap-responsive.min.css" >
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
  </head>

  <body>
<!--     <flower-container></flower-container>

    <script type="text/javascript" src="bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="js/vendor/d3.js"></script>
    <script type="text/javascript" src="js/vendor/d3.geom.js"></script>
    <script type="text/javascript" src="js/vendor/d3.layout.js"></script>
    <script type="text/javascript" src="js/app/CodeFlower.js"></script>
    <script type="text/javascript" src="js/app/app.js"></script>
    <script type="text/javascript" src="js/app/Gardener.js"></script>
    <script type="text/javascript" src="js/app/flowerContainer.js"></script>
    <script type="text/javascript" src="js/app/flowerViz.js"></script>
    <script type="text/javascript" src="js/app/flowerTerminal.js"></script>
    <script type="text/javascript" src="js/app/flowerUtils.js"></script>
    <script type="text/javascript" src="js/app/dbAccess.js"></script> -->

    <form id="form">
    Message: <input size="50" id="msg"> <input type="submit" value="Submit">
    </form>

    <script>
    var connection
    window.addEventListener("load", function () {
        var nickname = prompt("Choose a nickname")
        if (nickname) {
            connection = new WebSocket("ws://"+window.location.hostname+":8001")
            connection.onopen = function () {
                console.log("Connection opened")
                connection.send(nickname)
                document.getElementById("form").onsubmit = function (event) {
                    var msg = document.getElementById("msg")
                    if (msg.value)
                        connection.send(msg.value)
                    msg.value = ""
                    event.preventDefault()
                }   
            }
            connection.onclose = function () {
                console.log("Connection closed")
            }
            connection.onerror = function () {
                console.error("Connection error")
            }
            connection.onmessage = function (event) {
                var div = document.createElement("div")
                div.textContent = event.data
                document.body.appendChild(div)
            }
        }
    })
    </script>

    <!-- for browserSync -->
    <script type='text/javascript' id="__bs_script__">//<![CDATA[
        document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.2.11.1.js'><\/script>".replace("HOST", location.hostname));
    //]]></script>
  </body>
</html>
